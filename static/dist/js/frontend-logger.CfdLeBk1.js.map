{"version":3,"file":"frontend-logger.CfdLeBk1.js","sources":["../../js/frontend-logger.js"],"sourcesContent":["/**\n * Frontend Logging Utility\n * \n * Provides structured logging for frontend operations including:\n * - API calls and responses\n * - Errors with stack traces\n * - Tier loading success/failure\n * - User interactions\n */\n\n// Log levels\nconst LogLevel = {\n    DEBUG: 'DEBUG',\n    INFO: 'INFO',\n    WARN: 'WARN',\n    ERROR: 'ERROR'\n};\n\n// Configuration\nconst config = {\n    enabled: true,\n    minLevel: LogLevel.DEBUG,\n    includeTimestamp: true,\n    includeStackTrace: true,\n    maxLogSize: 1000 // Maximum number of logs to keep in memory\n};\n\n// In-memory log storage\nconst logs = [];\n\n/**\n * Format timestamp\n */\nfunction getTimestamp() {\n    return new Date().toISOString();\n}\n\n/**\n * Get stack trace\n */\nfunction getStackTrace() {\n    try {\n        throw new Error();\n    } catch (e) {\n        // Remove first 3 lines (Error, getStackTrace, log function)\n        const stack = e.stack.split('\\n').slice(3).join('\\n');\n        return stack;\n    }\n}\n\n/**\n * Core logging function\n */\nfunction log(level, message, data) {\n    if (!config.enabled) return;\n\n    const logEntry = {\n        level: level,\n        message: message,\n        timestamp: config.includeTimestamp ? getTimestamp() : null,\n        data: data || null\n    };\n\n    // Add stack trace for errors\n    if (level === LogLevel.ERROR && config.includeStackTrace) {\n        logEntry.stack = getStackTrace();\n    }\n\n    // Store in memory\n    logs.push(logEntry);\n    if (logs.length > config.maxLogSize) {\n        logs.shift(); // Remove oldest log\n    }\n\n    // Console output with appropriate method\n    const consoleMethod = level === LogLevel.ERROR ? 'error' :\n        level === LogLevel.WARN ? 'warn' :\n            level === LogLevel.INFO ? 'info' : 'log';\n\n    const prefix = `[${level}] ${logEntry.timestamp || ''} ${message}`;\n    if (data) {\n        console[consoleMethod](prefix, data);\n    } else {\n        console[consoleMethod](prefix);\n    }\n}\n\n/**\n * Public API\n */\nconst FrontendLogger = {\n    // Log levels\n    debug: function (message, data) {\n        log(LogLevel.DEBUG, message, data);\n    },\n\n    info: function (message, data) {\n        log(LogLevel.INFO, message, data);\n    },\n\n    warn: function (message, data) {\n        log(LogLevel.WARN, message, data);\n    },\n\n    error: function (message, data) {\n        log(LogLevel.ERROR, message, data);\n    },\n\n    // Specialized logging methods\n    logApiCall: function (method, url, options) {\n        this.info(`API Call: ${method} ${url}`, {\n            method: method,\n            url: url,\n            options: options\n        });\n    },\n\n    logApiResponse: function (method, url, status, data) {\n        const level = status >= 400 ? LogLevel.ERROR : LogLevel.INFO;\n        log(level, `API Response: ${method} ${url} - ${status}`, {\n            method: method,\n            url: url,\n            status: status,\n            data: data\n        });\n    },\n\n    logApiError: function (method, url, error) {\n        this.error(`API Error: ${method} ${url}`, {\n            method: method,\n            url: url,\n            error: error.message || error,\n            stack: error.stack\n        });\n    },\n\n    logTierLoad: function (success, tierData, error) {\n        if (success) {\n            this.info('Tier info loaded successfully', {\n                tier: tierData.current_tier,\n                tier_name: tierData.tier_name,\n                quota_used: tierData.quota_used_usd,\n                quota_limit: tierData.quota_usd\n            });\n        } else {\n            this.error('Tier info load failed', {\n                error: error.message || error,\n                stack: error.stack\n            });\n        }\n    },\n\n    logAnalyticsLoad: function (success, data, error) {\n        if (success) {\n            this.info('Analytics loaded successfully', {\n                total_verifications: data.total_verifications,\n                success_rate: data.success_rate\n            });\n        } else {\n            this.error('Analytics load failed', {\n                error: error.message || error,\n                stack: error.stack\n            });\n        }\n    },\n\n    logActivityLoad: function (success, count, error) {\n        if (success) {\n            this.info(`Activity loaded successfully: ${count} items`);\n        } else {\n            this.error('Activity load failed', {\n                error: error.message || error,\n                stack: error.stack\n            });\n        }\n    },\n\n    logUserAction: function (action, details) {\n        this.info(`User action: ${action}`, details);\n    },\n\n    // Get all logs\n    getLogs: function () {\n        return logs.slice(); // Return copy\n    },\n\n    // Clear logs\n    clearLogs: function () {\n        logs.length = 0;\n        this.info('Logs cleared');\n    },\n\n    // Export logs as JSON\n    exportLogs: function () {\n        return JSON.stringify(logs, null, 2);\n    },\n\n    // Configure logger\n    configure: function (options) {\n        Object.assign(config, options);\n    }\n};\n\n// Expose to window for backward compatibility\nif (typeof window !== 'undefined') {\n    window.FrontendLogger = FrontendLogger;\n    window.LogLevel = LogLevel;\n    // Log initialization\n    FrontendLogger.info('Frontend logger initialized');\n}\n\n\n"],"names":["LogLevel","DEBUG","INFO","WARN","ERROR","config","enabled","minLevel","includeTimestamp","includeStackTrace","maxLogSize","logs","log","level","message","data","logEntry","timestamp","Date","toISOString","stack","Error","e","split","slice","join","getStackTrace","push","length","shift","FrontendLogger","debug","info","warn","error","logApiCall","method","url","options","this","logApiResponse","status","logApiError","logTierLoad","success","tierData","tier","current_tier","tier_name","quota_used","quota_used_usd","quota_limit","quota_usd","logAnalyticsLoad","total_verifications","success_rate","logActivityLoad","count","logUserAction","action","details","getLogs","clearLogs","exportLogs","JSON","stringify","configure","Object","assign","window"],"mappings":"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"}