const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunks/rentals.BOPgrR4x.js","js/chunks/index.Dos3PyFQ.js","js/chunks/wallet.BALYrSMg.js"])))=>i.map(i=>d[i]);
import{i as e}from"./dashboard.CIgkGDLr.js";const t={},n=function(e,n,o){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(n.map(e=>{if((e=function(e){return"/static/"+e}(e))in t)return;t[e]=!0;const n=e.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=n?"stylesheet":"modulepreload",n||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),n?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},o={},s={};async function i(e){if(o[e])return o[e];if(s[e])return s[e];const t=(async()=>{try{const t=await((e,t,n)=>{const o=e[t];return o?"function"==typeof o?o():Promise.resolve(o):new Promise((e,o)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./modules/analytics.js":()=>n(()=>import("./chunks/analytics.CIBchW2O.js"),[]),"./modules/api.js":()=>n(()=>import("./dashboard.CIgkGDLr.js").then(e=>e.a),[]),"./modules/auth.js":()=>n(()=>Promise.resolve().then(()=>T),void 0),"./modules/errors.js":()=>n(()=>import("./dashboard.CIgkGDLr.js").then(e=>e.e),[]),"./modules/rentals.js":()=>n(()=>import("./chunks/rentals.BOPgrR4x.js"),__vite__mapDeps([0,1])),"./modules/scroll-timeline.js":()=>n(()=>Promise.resolve().then(()=>p),void 0),"./modules/sms-display.js":()=>n(()=>import("./chunks/sms-display.C34vPbzN.js"),[]),"./modules/state.js":()=>n(()=>import("./dashboard.CIgkGDLr.js").then(e=>e.s),[]),"./modules/ui.js":()=>n(()=>import("./dashboard.CIgkGDLr.js").then(e=>e.u),[]),"./modules/utils.js":()=>n(()=>Promise.resolve().then(()=>u),void 0),"./modules/validation.js":()=>n(()=>import("./dashboard.CIgkGDLr.js").then(e=>e.v),[]),"./modules/verification.js":()=>n(()=>import("./chunks/verification.DoOECp4r.js"),[]),"./modules/wallet.js":()=>n(()=>import("./chunks/wallet.BALYrSMg.js"),__vite__mapDeps([2,1]))}),`./modules/${e}.js`,3);return o[e]=t,delete s[e],t}catch(t){throw delete s[e],t}})();return s[e]=t,t}function r(e){"requestIdleCallback"in window?requestIdleCallback(()=>i(e)):setTimeout(()=>i(e),2e3)}function a(e,t=""){l(e.message||"An error occurred. Please try again.")}function l(e){const t=document.createElement("div");t.className="notification notification-error",t.textContent=e,t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background-color: #ef4444;\n    color: white;\n    padding: 1rem;\n    border-radius: 0.5rem;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    animation: slideIn 0.3s ease-in-out;\n  ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-in-out",setTimeout(()=>t.remove(),300)},5e3)}function c(){window.addEventListener("error",e=>{a(e.error,"Global error handler")}),window.addEventListener("unhandledrejection",e=>{a(e.reason,"Unhandled promise rejection")})}function d(){const e=document.createElement("style");e.textContent="\n    @keyframes slideIn {\n      from {\n        transform: translateX(400px);\n        opacity: 0;\n      }\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n    \n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateX(400px);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(e)}const u=Object.freeze(Object.defineProperty({__proto__:null,addAnimationStyles:d,apiCall:async function(e,t={}){try{const n=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!n.ok)throw new Error(`API error: ${n.status}`);return await n.json()}catch(n){throw a(n,"API call"),n}},debounce:function(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}},formatCurrency:function(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)},formatDate:function(e,t="MM/DD/YYYY"){const n=new Date(e),o=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear();return t.replace("DD",o).replace("MM",s).replace("YYYY",i)},getLocalStorage:function(e,t=null){try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return t}},getSessionStorage:function(e,t=null){try{const n=sessionStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return t}},handleError:a,isValidEmail:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},isValidPhone:function(e){return/^\+?[\d\s\-()]{10,}$/.test(e)},isValidURL:function(e){try{return new URL(e),!0}catch{return!1}},removeLocalStorage:function(e){try{localStorage.removeItem(e)}catch(t){}},setLocalStorage:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}},setSessionStorage:function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(n){}},setupGlobalErrorHandlers:c,showErrorNotification:l,showSuccessNotification:function(e){const t=document.createElement("div");t.className="notification notification-success",t.textContent=e,t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background-color: #10b981;\n    color: white;\n    padding: 1rem;\n    border-radius: 0.5rem;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    animation: slideIn 0.3s ease-in-out;\n  ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-in-out",setTimeout(()=>t.remove(),300)},3e3)},showWarningNotification:function(e){const t=document.createElement("div");t.className="notification notification-warning",t.textContent=e,t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background-color: #f59e0b;\n    color: #111827;\n    padding: 1rem;\n    border-radius: 0.5rem;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    animation: slideIn 0.3s ease-in-out;\n  ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-in-out",setTimeout(()=>t.remove(),300)},4e3)},throttle:function(e,t){let n;return function(...o){n||(e.apply(this,o),n=!0,setTimeout(()=>n=!1,t))}}},Symbol.toStringTag,{value:"Module"}));function m(){const e=new h;return e.init(),e}class h{constructor(){this.sections=[],this.currentSection=null,this.scrollProgress=0,this.isScrolling=!1,this.scrollTimeout=null}init(){this.setupElements(),this.setupEventListeners(),this.updateProgress()}setupElements(){this.sections=Array.from(document.querySelectorAll("[data-timeline-section]")),0!==this.sections.length&&(this.createTimeline(),this.createProgressBar(),this.createScrollToTopButton())}createTimeline(){const e=document.createElement("div");e.className="scroll-timeline",e.id="scroll-timeline";const t=document.createElement("div");t.className="scroll-timeline-line";const n=document.createElement("div");n.className="scroll-timeline-line-progress",t.appendChild(n),e.appendChild(t),this.sections.forEach((t,n)=>{const o=document.createElement("div");o.className="scroll-timeline-item",o.dataset.index=n,o.dataset.sectionId=t.id||`section-${n}`;const s=document.createElement("div");s.className="scroll-timeline-dot";const i=document.createElement("div");i.className="scroll-timeline-label",i.textContent=t.dataset.timelineLabel||`Section ${n+1}`,o.appendChild(s),o.appendChild(i),o.addEventListener("click",()=>this.scrollToSection(n)),e.appendChild(o)}),document.body.appendChild(e),this.timelineContainer=e}createProgressBar(){const e=document.createElement("div");e.className="scroll-progress-bar",e.id="scroll-progress-bar",document.body.appendChild(e),this.progressBar=e}createScrollToTopButton(){const e=document.createElement("button");e.className="scroll-to-top",e.id="scroll-to-top",e.innerHTML="â†‘",e.setAttribute("aria-label","Scroll to top"),e.addEventListener("click",()=>this.scrollToTop()),document.body.appendChild(e),this.scrollToTopButton=e}setupEventListeners(){window.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),window.addEventListener("resize",()=>this.updateProgress(),{passive:!0})}handleScroll(){this.isScrolling=!0,this.updateProgress(),this.updateTimeline(),this.updateScrollToTopButton(),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1},150)}updateProgress(){var e;const t=window.scrollY,n=document.documentElement.scrollHeight-window.innerHeight,o=n>0?t/n*100:0;this.scrollProgress=Math.min(o,100),this.progressBar&&(this.progressBar.style.width=`${this.scrollProgress}%`);const s=null==(e=this.timelineContainer)?void 0:e.querySelector(".scroll-timeline-line-progress");s&&(s.style.height=`${this.scrollProgress}%`)}updateTimeline(){let e=-1;if(this.sections.forEach((t,n)=>{t.getBoundingClientRect().top<=window.innerHeight/2&&(e=n)}),e!==this.currentSection&&(this.currentSection=e,document.querySelectorAll(".scroll-timeline-item").forEach(e=>{e.classList.remove("active")}),e>=0)){const t=document.querySelector(`.scroll-timeline-item[data-index="${e}"]`);t&&t.classList.add("active")}this.sections.forEach((e,t)=>{e.getBoundingClientRect().top<.75*window.innerHeight&&e.classList.add("in-view")})}updateScrollToTopButton(){this.scrollToTopButton&&(window.scrollY>window.innerHeight?this.scrollToTopButton.classList.add("visible"):this.scrollToTopButton.classList.remove("visible"))}scrollToSection(e){if(e<0||e>=this.sections.length)return;const t=this.sections[e].offsetTop-80;window.scrollTo({top:t,behavior:"smooth"})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}destroy(){window.removeEventListener("scroll",()=>this.handleScroll()),window.removeEventListener("resize",()=>this.updateProgress()),this.timelineContainer&&this.timelineContainer.remove(),this.progressBar&&this.progressBar.remove(),this.scrollToTopButton&&this.scrollToTopButton.remove()}}const p=Object.freeze(Object.defineProperty({__proto__:null,ScrollTimeline:h,initScrollTimeline:m},Symbol.toStringTag,{value:"Module"}));function f(e){localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),localStorage.setItem("token_type",e.token_type),localStorage.setItem("token_expires_at",Date.now()+1e3*e.expires_in)}function g(){const e=document.getElementById("login-form"),t=document.getElementById("register-form"),n=document.getElementById("logout-btn");e&&e.addEventListener("submit",w),t&&t.addEventListener("submit",y),n&&n.addEventListener("click",_)}async function w(e){e.preventDefault();const t=document.getElementById("email"),n=document.getElementById("password");if(t&&n)try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.value,password:n.value})});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Login failed")}f(await e.json()),window.location.href="/dashboard"}catch(o){alert("Login failed: "+o.message)}}async function y(e){e.preventDefault();const t=document.getElementById("email"),n=document.getElementById("password");if(t&&n)try{const e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.value,password:n.value})});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Registration failed")}alert("Registration successful! Please log in."),window.location.href="/auth/login"}catch(o){alert("Registration failed: "+o.message)}}async function _(){try{const e=localStorage.getItem("access_token");e&&await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(e){}localStorage.clear(),window.location.href="/auth/login"}const T=Object.freeze(Object.defineProperty({__proto__:null,ensureValidToken:async function(){const e=localStorage.getItem("token_expires_at"),t=Date.now();if(e&&t>e-3e5)try{const e=localStorage.getItem("refresh_token");if(!e)throw new Error("No refresh token available");const t=await fetch("/api/auth/refresh",{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(t.ok){return f(await t.json()),!0}return localStorage.clear(),window.location.href="/auth/login",!1}catch(n){return localStorage.clear(),window.location.href="/auth/login",!1}return!0},handleLogin:w,handleLogout:_,handleRegister:y,initAuth:g,storeTokens:f},Symbol.toStringTag,{value:"Module"})),E=window.fetch;function v(){const e=document.getElementById("module-loading");e&&e.remove()}async function S(){try{c(),d();(document.body.classList.contains("landing-page")||document.querySelectorAll("[data-timeline-section]").length>0)&&m(),g(),e();const n=document.body.dataset.page;if(n){!function(){const e=document.createElement("div");e.id="module-loading",e.className="module-loading",e.innerHTML='<span class="spinner"></span>',e.style.cssText="\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 9998;\n  ",document.body.appendChild(e)}();const e=await i(n);v();const o=e[`init${t=n,t.charAt(0).toUpperCase()+t.slice(1)}`];o&&o()}r("verification"),r("analytics"),r("wallet"),r("rentals")}catch(n){v()}var t}window.fetch=async function(...e){const{ensureValidToken:t}=await n(async()=>{const{ensureValidToken:e}=await Promise.resolve().then(()=>T);return{ensureValidToken:e}},void 0);await t();const o=localStorage.getItem("access_token");o&&e[1]&&(e[1].headers=e[1].headers||{},e[1].headers.Authorization=`Bearer ${o}`);const s=await E.apply(this,e);return 401===s.status&&(localStorage.clear(),window.location.href="/auth/login"),s},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",S):S();
//# sourceMappingURL=main.BgKbbN07.js.map
