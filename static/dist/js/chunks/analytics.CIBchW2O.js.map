{"version":3,"file":"analytics.CIBchW2O.js","sources":["../../../js/modules/analytics.js"],"sourcesContent":["/**\n * Analytics Manager Module\n * Handles dashboard analytics, statistics, charts, filters, and exports\n */\n\nclass AnalyticsManager {\n  constructor() {\n    this.charts = {};\n    this.filters = {\n      dateFrom: null,\n      dateTo: null,\n      services: [],\n      countries: [],\n      status: []\n    };\n    this.data = {\n      statistics: {},\n      dailyStats: [],\n      serviceBreakdown: [],\n      countryBreakdown: []\n    };\n  }\n\n  /**\n   * Initialize analytics dashboard\n   */\n  async init() {\n    try {\n      console.log('Initializing analytics dashboard...');\n      \n      // Load initial data\n      await this.loadStatistics();\n      await this.loadCharts();\n      \n      // Setup filters\n      this.setupFilters();\n      \n      // Setup export buttons\n      this.setupExport();\n      \n      // Setup auto-refresh\n      this.setupAutoRefresh();\n      \n      console.log('Analytics dashboard initialized successfully');\n    } catch (error) {\n      console.error('Error initializing analytics:', error);\n      this.showError('Failed to initialize analytics dashboard');\n    }\n  }\n\n  /**\n   * Load statistics cards\n   */\n  async loadStatistics() {\n    try {\n      const token = localStorage.getItem('access_token');\n      console.log('Loading statistics with token:', token ? 'present' : 'missing');\n      \n      const response = await axios.get('/api/analytics/summary', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      console.log('Statistics loaded:', response.data);\n      this.data.statistics = response.data;\n      this.renderStatistics();\n    } catch (error) {\n      console.error('Error loading statistics:', error);\n      console.error('Error response:', error.response?.data);\n      console.error('Error status:', error.response?.status);\n      this.showError('Failed to load statistics');\n    }\n  }\n\n  /**\n   * Render statistics cards\n   */\n  renderStatistics() {\n    const stats = this.data.statistics;\n    \n    // Total Verifications\n    const totalCard = document.getElementById('stat-total-verifications');\n    if (totalCard) {\n      totalCard.innerHTML = `\n        <div class=\"stat-card\">\n          <div class=\"stat-icon bg-primary\">\n            <i class=\"fas fa-check-circle\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h6 class=\"stat-label\">Total Verifications</h6>\n            <h3 class=\"stat-value\">${stats.total_verifications || 0}</h3>\n            <small class=\"stat-trend ${stats.total_trend > 0 ? 'text-success' : 'text-danger'}\">\n              <i class=\"fas fa-${stats.total_trend > 0 ? 'arrow-up' : 'arrow-down'}\"></i>\n              ${Math.abs(stats.total_trend || 0)}% this month\n            </small>\n          </div>\n        </div>\n      `;\n    }\n\n    // Success Rate\n    const successCard = document.getElementById('stat-success-rate');\n    if (successCard) {\n      successCard.innerHTML = `\n        <div class=\"stat-card\">\n          <div class=\"stat-icon bg-success\">\n            <i class=\"fas fa-percentage\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h6 class=\"stat-label\">Success Rate</h6>\n            <h3 class=\"stat-value\">${(stats.success_rate || 0).toFixed(1)}%</h3>\n            <small class=\"stat-trend ${stats.success_trend > 0 ? 'text-success' : 'text-danger'}\">\n              <i class=\"fas fa-${stats.success_trend > 0 ? 'arrow-up' : 'arrow-down'}\"></i>\n              ${Math.abs(stats.success_trend || 0).toFixed(1)}% change\n            </small>\n          </div>\n        </div>\n      `;\n    }\n\n    // Active Rentals\n    const activeCard = document.getElementById('stat-active-rentals');\n    if (activeCard) {\n      activeCard.innerHTML = `\n        <div class=\"stat-card\">\n          <div class=\"stat-icon bg-info\">\n            <i class=\"fas fa-phone\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h6 class=\"stat-label\">Active Rentals</h6>\n            <h3 class=\"stat-value\">${stats.active_rentals || 0}</h3>\n            <small class=\"stat-trend text-muted\">\n              <i class=\"fas fa-clock\"></i>\n              Currently active\n            </small>\n          </div>\n        </div>\n      `;\n    }\n\n    // Credit Balance\n    const creditCard = document.getElementById('stat-credit-balance');\n    if (creditCard) {\n      creditCard.innerHTML = `\n        <div class=\"stat-card\">\n          <div class=\"stat-icon bg-warning\">\n            <i class=\"fas fa-coins\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h6 class=\"stat-label\">Credit Balance</h6>\n            <h3 class=\"stat-value\">$${(stats.credit_balance || 0).toFixed(2)}</h3>\n            <small class=\"stat-trend text-muted\">\n              <i class=\"fas fa-wallet\"></i>\n              Available balance\n            </small>\n          </div>\n        </div>\n      `;\n    }\n  }\n\n  /**\n   * Load chart data\n   */\n  async loadCharts() {\n    try {\n      // Build query params from filters\n      const params = this.buildFilterParams();\n      \n      // Load daily stats\n      const dailyResponse = await axios.get('/api/analytics/daily-stats', { params });\n      this.data.dailyStats = dailyResponse.data;\n      \n      // Load service breakdown\n      const serviceResponse = await axios.get('/api/analytics/service-breakdown', { params });\n      this.data.serviceBreakdown = serviceResponse.data;\n      \n      // Load country breakdown\n      const countryResponse = await axios.get('/api/analytics/country-breakdown', { params });\n      this.data.countryBreakdown = countryResponse.data;\n      \n      // Render charts\n      this.renderCharts();\n    } catch (error) {\n      console.error('Error loading chart data:', error);\n      this.showError('Failed to load chart data');\n    }\n  }\n\n  /**\n   * Render all charts\n   */\n  renderCharts() {\n    // Destroy existing charts\n    Object.values(this.charts).forEach(chart => {\n      if (chart) chart.destroy();\n    });\n    this.charts = {};\n\n    // Create line chart for verifications over time\n    this.createVerificationsChart();\n    \n    // Create line chart for success rate trend\n    this.createSuccessRateChart();\n    \n    // Create pie chart for service breakdown\n    this.createServiceChart();\n    \n    // Create bar chart for country breakdown\n    this.createCountryChart();\n  }\n\n  /**\n   * Create verifications over time chart\n   */\n  createVerificationsChart() {\n    const ctx = document.getElementById('chart-verifications');\n    if (!ctx) return;\n\n    const labels = this.data.dailyStats.map(d => d.date);\n    const data = this.data.dailyStats.map(d => d.count);\n\n    this.charts.verifications = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Verifications',\n          data: data,\n          borderColor: '#007bff',\n          backgroundColor: 'rgba(0, 123, 255, 0.1)',\n          borderWidth: 2,\n          fill: true,\n          tension: 0.4,\n          pointRadius: 4,\n          pointBackgroundColor: '#007bff',\n          pointBorderColor: '#fff',\n          pointBorderWidth: 2\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: true,\n        plugins: {\n          legend: {\n            display: true,\n            position: 'top'\n          },\n          title: {\n            display: true,\n            text: 'Verifications Over Time'\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true,\n            ticks: {\n              stepSize: 1\n            }\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Create success rate trend chart\n   */\n  createSuccessRateChart() {\n    const ctx = document.getElementById('chart-success-rate');\n    if (!ctx) return;\n\n    const labels = this.data.dailyStats.map(d => d.date);\n    const data = this.data.dailyStats.map(d => d.success_rate);\n\n    this.charts.successRate = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Success Rate (%)',\n          data: data,\n          borderColor: '#28a745',\n          backgroundColor: 'rgba(40, 167, 69, 0.1)',\n          borderWidth: 2,\n          fill: true,\n          tension: 0.4,\n          pointRadius: 4,\n          pointBackgroundColor: '#28a745',\n          pointBorderColor: '#fff',\n          pointBorderWidth: 2\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: true,\n        plugins: {\n          legend: {\n            display: true,\n            position: 'top'\n          },\n          title: {\n            display: true,\n            text: 'Success Rate Trend'\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true,\n            max: 100,\n            ticks: {\n              callback: function(value) {\n                return value + '%';\n              }\n            }\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Create service breakdown pie chart\n   */\n  createServiceChart() {\n    const ctx = document.getElementById('chart-service-breakdown');\n    if (!ctx) return;\n\n    const labels = this.data.serviceBreakdown.map(d => d.service);\n    const data = this.data.serviceBreakdown.map(d => d.count);\n    const colors = [\n      '#007bff', '#28a745', '#ffc107', '#dc3545',\n      '#17a2b8', '#6f42c1', '#e83e8c', '#fd7e14'\n    ];\n\n    this.charts.service = new Chart(ctx, {\n      type: 'doughnut',\n      data: {\n        labels: labels,\n        datasets: [{\n          data: data,\n          backgroundColor: colors.slice(0, labels.length),\n          borderColor: '#fff',\n          borderWidth: 2\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: true,\n        plugins: {\n          legend: {\n            display: true,\n            position: 'bottom'\n          },\n          title: {\n            display: true,\n            text: 'Service Breakdown'\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Create country breakdown bar chart\n   */\n  createCountryChart() {\n    const ctx = document.getElementById('chart-country-breakdown');\n    if (!ctx) return;\n\n    const labels = this.data.countryBreakdown.map(d => d.country);\n    const data = this.data.countryBreakdown.map(d => d.count);\n\n    this.charts.country = new Chart(ctx, {\n      type: 'bar',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Verifications',\n          data: data,\n          backgroundColor: '#007bff',\n          borderColor: '#0056b3',\n          borderWidth: 1\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: true,\n        indexAxis: 'y',\n        plugins: {\n          legend: {\n            display: false\n          },\n          title: {\n            display: true,\n            text: 'Country Breakdown'\n          }\n        },\n        scales: {\n          x: {\n            beginAtZero: true,\n            ticks: {\n              stepSize: 1\n            }\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Setup filter controls\n   */\n  setupFilters() {\n    // Date range filter\n    const dateFromInput = document.getElementById('filter-date-from');\n    const dateToInput = document.getElementById('filter-date-to');\n    \n    if (dateFromInput) {\n      dateFromInput.addEventListener('change', (e) => {\n        this.filters.dateFrom = e.target.value;\n        this.applyFilters();\n      });\n    }\n    \n    if (dateToInput) {\n      dateToInput.addEventListener('change', (e) => {\n        this.filters.dateTo = e.target.value;\n        this.applyFilters();\n      });\n    }\n\n    // Service filter\n    const serviceFilter = document.getElementById('filter-service');\n    if (serviceFilter) {\n      serviceFilter.addEventListener('change', (e) => {\n        this.filters.services = Array.from(e.target.selectedOptions, option => option.value);\n        this.applyFilters();\n      });\n    }\n\n    // Country filter\n    const countryFilter = document.getElementById('filter-country');\n    if (countryFilter) {\n      countryFilter.addEventListener('change', (e) => {\n        this.filters.countries = Array.from(e.target.selectedOptions, option => option.value);\n        this.applyFilters();\n      });\n    }\n\n    // Status filter\n    const statusFilter = document.getElementById('filter-status');\n    if (statusFilter) {\n      statusFilter.addEventListener('change', (e) => {\n        this.filters.status = Array.from(e.target.selectedOptions, option => option.value);\n        this.applyFilters();\n      });\n    }\n\n    // Clear filters button\n    const clearBtn = document.getElementById('btn-clear-filters');\n    if (clearBtn) {\n      clearBtn.addEventListener('click', () => this.clearFilters());\n    }\n\n    // Load filters from localStorage\n    this.loadFiltersFromStorage();\n  }\n\n  /**\n   * Apply filters and reload charts\n   */\n  async applyFilters() {\n    try {\n      // Save filters to localStorage\n      this.saveFiltersToStorage();\n      \n      // Reload charts with new filters\n      await this.loadCharts();\n      \n      // Update filter indicators\n      this.updateFilterIndicators();\n    } catch (error) {\n      console.error('Error applying filters:', error);\n      this.showError('Failed to apply filters');\n    }\n  }\n\n  /**\n   * Clear all filters\n   */\n  async clearFilters() {\n    this.filters = {\n      dateFrom: null,\n      dateTo: null,\n      services: [],\n      countries: [],\n      status: []\n    };\n\n    // Reset form inputs\n    document.getElementById('filter-date-from').value = '';\n    document.getElementById('filter-date-to').value = '';\n    document.getElementById('filter-service').selectedIndex = -1;\n    document.getElementById('filter-country').selectedIndex = -1;\n    document.getElementById('filter-status').selectedIndex = -1;\n\n    // Clear localStorage\n    localStorage.removeItem('analytics-filters');\n\n    // Reload charts\n    await this.loadCharts();\n    this.updateFilterIndicators();\n  }\n\n  /**\n   * Build filter parameters for API\n   */\n  buildFilterParams() {\n    const params = {};\n    \n    if (this.filters.dateFrom) params.date_from = this.filters.dateFrom;\n    if (this.filters.dateTo) params.date_to = this.filters.dateTo;\n    if (this.filters.services.length > 0) params.services = this.filters.services.join(',');\n    if (this.filters.countries.length > 0) params.countries = this.filters.countries.join(',');\n    if (this.filters.status.length > 0) params.status = this.filters.status.join(',');\n    \n    return params;\n  }\n\n  /**\n   * Update filter indicators\n   */\n  updateFilterIndicators() {\n    const indicator = document.getElementById('filter-indicator');\n    if (!indicator) return;\n\n    const activeFilters = [\n      this.filters.dateFrom ? 1 : 0,\n      this.filters.dateTo ? 1 : 0,\n      this.filters.services.length,\n      this.filters.countries.length,\n      this.filters.status.length\n    ].reduce((a, b) => a + b, 0);\n\n    if (activeFilters > 0) {\n      indicator.innerHTML = `<span class=\"badge bg-primary\">${activeFilters} active</span>`;\n      indicator.style.display = 'inline-block';\n    } else {\n      indicator.style.display = 'none';\n    }\n  }\n\n  /**\n   * Save filters to localStorage\n   */\n  saveFiltersToStorage() {\n    localStorage.setItem('analytics-filters', JSON.stringify(this.filters));\n  }\n\n  /**\n   * Load filters from localStorage\n   */\n  loadFiltersFromStorage() {\n    const stored = localStorage.getItem('analytics-filters');\n    if (stored) {\n      try {\n        this.filters = JSON.parse(stored);\n        \n        // Restore form values\n        if (this.filters.dateFrom) {\n          document.getElementById('filter-date-from').value = this.filters.dateFrom;\n        }\n        if (this.filters.dateTo) {\n          document.getElementById('filter-date-to').value = this.filters.dateTo;\n        }\n      } catch (error) {\n        console.error('Error loading filters from storage:', error);\n      }\n    }\n  }\n\n  /**\n   * Setup export functionality\n   */\n  setupExport() {\n    const csvBtn = document.getElementById('btn-export-csv');\n    const pdfBtn = document.getElementById('btn-export-pdf');\n    const emailBtn = document.getElementById('btn-export-email');\n\n    if (csvBtn) {\n      csvBtn.addEventListener('click', () => this.exportCSV());\n    }\n\n    if (pdfBtn) {\n      pdfBtn.addEventListener('click', () => this.exportPDF());\n    }\n\n    if (emailBtn) {\n      emailBtn.addEventListener('click', () => this.exportEmail());\n    }\n  }\n\n  /**\n   * Export data to CSV\n   */\n  async exportCSV() {\n    try {\n      const params = this.buildFilterParams();\n      const response = await axios.post('/api/analytics/export', {\n        format: 'csv',\n        ...params\n      }, {\n        responseType: 'blob'\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `analytics-${new Date().toISOString().split('T')[0]}.csv`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n\n      this.showSuccess('Analytics exported to CSV');\n    } catch (error) {\n      console.error('Error exporting CSV:', error);\n      this.showError('Failed to export CSV');\n    }\n  }\n\n  /**\n   * Export data to PDF\n   */\n  async exportPDF() {\n    try {\n      const params = this.buildFilterParams();\n      const response = await axios.post('/api/analytics/export', {\n        format: 'pdf',\n        ...params\n      }, {\n        responseType: 'blob'\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `analytics-${new Date().toISOString().split('T')[0]}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n\n      this.showSuccess('Analytics exported to PDF');\n    } catch (error) {\n      console.error('Error exporting PDF:', error);\n      this.showError('Failed to export PDF');\n    }\n  }\n\n  /**\n   * Export data via email\n   */\n  async exportEmail() {\n    try {\n      const email = prompt('Enter email address to send report:');\n      if (!email) return;\n\n      const params = this.buildFilterParams();\n      await axios.post('/api/analytics/export', {\n        format: 'email',\n        email: email,\n        ...params\n      });\n\n      this.showSuccess(`Report sent to ${email}`);\n    } catch (error) {\n      console.error('Error exporting email:', error);\n      this.showError('Failed to send email report');\n    }\n  }\n\n  /**\n   * Setup auto-refresh\n   */\n  setupAutoRefresh() {\n    // Refresh statistics every 30 seconds\n    setInterval(() => {\n      this.loadStatistics();\n    }, 30000);\n\n    // Refresh charts every 5 minutes\n    setInterval(() => {\n      this.loadCharts();\n    }, 300000);\n  }\n\n  /**\n   * Show success message\n   */\n  showSuccess(message) {\n    // Use toast notification if available\n    if (window.showToast) {\n      window.showToast(message, 'success');\n    } else {\n      alert(message);\n    }\n  }\n\n  /**\n   * Show error message\n   */\n  showError(message) {\n    // Use toast notification if available\n    if (window.showToast) {\n      window.showToast(message, 'error');\n    } else {\n      alert(message);\n    }\n  }\n}\n\n// Initialize on page load\ndocument.addEventListener('DOMContentLoaded', () => {\n  const analytics = new AnalyticsManager();\n  analytics.init();\n  window.analyticsManager = analytics;\n});\n"],"names":["AnalyticsManager","constructor","this","charts","filters","dateFrom","dateTo","services","countries","status","data","statistics","dailyStats","serviceBreakdown","countryBreakdown","init","loadStatistics","loadCharts","setupFilters","setupExport","setupAutoRefresh","error","showError","token","localStorage","getItem","response","axios","get","headers","Authorization","renderStatistics","stats","totalCard","document","getElementById","innerHTML","total_verifications","total_trend","Math","abs","successCard","success_rate","toFixed","success_trend","activeCard","active_rentals","creditCard","credit_balance","params","buildFilterParams","dailyResponse","serviceResponse","countryResponse","renderCharts","Object","values","forEach","chart","destroy","createVerificationsChart","createSuccessRateChart","createServiceChart","createCountryChart","ctx","labels","map","d","date","count","verifications","Chart","type","datasets","label","borderColor","backgroundColor","borderWidth","fill","tension","pointRadius","pointBackgroundColor","pointBorderColor","pointBorderWidth","options","responsive","maintainAspectRatio","plugins","legend","display","position","title","text","scales","y","beginAtZero","ticks","stepSize","successRate","max","callback","value","service","slice","length","country","indexAxis","x","dateFromInput","dateToInput","addEventListener","e","target","applyFilters","serviceFilter","Array","from","selectedOptions","option","countryFilter","statusFilter","clearBtn","clearFilters","loadFiltersFromStorage","saveFiltersToStorage","updateFilterIndicators","selectedIndex","removeItem","date_from","date_to","join","indicator","activeFilters","reduce","a","b","style","setItem","JSON","stringify","stored","parse","csvBtn","pdfBtn","emailBtn","exportCSV","exportPDF","exportEmail","post","format","responseType","url","window","URL","createObjectURL","Blob","link","createElement","href","setAttribute","Date","toISOString","split","body","appendChild","click","parentNode","removeChild","showSuccess","email","prompt","setInterval","message","showToast","alert","analytics","analyticsManager"],"mappings":"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"}