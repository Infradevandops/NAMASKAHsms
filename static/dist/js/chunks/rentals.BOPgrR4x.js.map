{"version":3,"file":"rentals.BOPgrR4x.js","sources":["../../../js/modules/rentals.js"],"sourcesContent":["// Rentals Module\nimport axios from 'axios'\n\nexport function initRentals() {\n  const rentForm = document.getElementById('rent-form')\n  const renewBtn = document.getElementById('renew-btn')\n\n  if (rentForm) rentForm.addEventListener('submit', handleRent)\n  if (renewBtn) renewBtn.addEventListener('click', handleRenew)\n\n  loadRentals()\n}\n\nasync function loadRentals() {\n  try {\n    const response = await axios.get('/api/rentals')\n    const rentalsEl = document.getElementById('rentals-list')\n    if (!rentalsEl) return\n\n    rentalsEl.innerHTML = ''\n    response.data.forEach(rental => {\n      const div = document.createElement('div')\n      div.className = 'rental-item'\n      div.innerHTML = `\n        <p>Phone: ${rental.phone_number}</p>\n        <p>Service: ${rental.service_name}</p>\n        <p>Expires: ${new Date(rental.expires_at).toLocaleString()}</p>\n        <p>Cost: $${rental.cost}</p>\n        <button onclick=\"renewRental('${rental.id}')\">Renew</button>\n      `\n      rentalsEl.appendChild(div)\n    })\n  } catch (error) {\n    console.error('Failed to load rentals:', error)\n  }\n}\n\nasync function handleRent(e) {\n  e.preventDefault()\n  try {\n    const response = await axios.post('/api/rentals/create', {\n      country: document.getElementById('country').value,\n      service: document.getElementById('service').value,\n      duration_hours: parseInt(document.getElementById('duration').value)\n    })\n    alert('Rental created! Phone: ' + response.data.phone_number)\n    loadRentals()\n  } catch (error) {\n    alert('Rental failed: ' + (error.response?.data?.detail || 'Unknown error'))\n  }\n}\n\nasync function handleRenew() {\n  const rentalId = document.getElementById('rental-id').value\n  try {\n    await axios.post(`/api/rentals/${rentalId}/renew`)\n    alert('Rental renewed!')\n    loadRentals()\n  } catch (error) {\n    alert('Renewal failed: ' + (error.response?.data?.detail || 'Unknown error'))\n  }\n}\n\nasync function renewRental(id) {\n  try {\n    await axios.post(`/api/rentals/${id}/renew`)\n    alert('Rental renewed!')\n    loadRentals()\n  } catch (error) {\n    alert('Renewal failed: ' + (error.response?.data?.detail || 'Unknown error'))\n  }\n}\n\nexport { loadRentals, handleRent, handleRenew, renewRental }\n"],"names":["initRentals","rentForm","document","getElementById","renewBtn","addEventListener","handleRent","handleRenew","loadRentals","async","response","axios","get","rentalsEl","innerHTML","data","forEach","rental","div","createElement","className","phone_number","service_name","Date","expires_at","toLocaleString","cost","id","appendChild","error","e","preventDefault","post","country","value","service","duration_hours","parseInt","alert","_b","_a","detail","rentalId","renewRental"],"mappings":"wCAGO,SAASA,IACd,MAAMC,EAAWC,SAASC,eAAe,aACnCC,EAAWF,SAASC,eAAe,aAErCF,GAAUA,EAASI,iBAAiB,SAAUC,GAC9CF,GAAUA,EAASC,iBAAiB,QAASE,GAEjDC,GACF,CAEAC,eAAeD,IACb,IACE,MAAME,QAAiBC,EAAMC,IAAI,gBAC3BC,EAAYX,SAASC,eAAe,gBAC1C,IAAKU,EAAW,OAEhBA,EAAUC,UAAY,GACtBJ,EAASK,KAAKC,QAAQC,IACpB,MAAMC,EAAMhB,SAASiB,cAAc,OACnCD,EAAIE,UAAY,cAChBF,EAAIJ,UAAY,uBACFG,EAAOI,yCACLJ,EAAOK,yCACP,IAAIC,KAAKN,EAAOO,YAAYC,2CAC9BR,EAAOS,mDACaT,EAAOU,+BAEzCd,EAAUe,YAAYV,IAE1B,OAASW,GAET,CACF,CAEApB,eAAeH,EAAWwB,WACxBA,EAAEC,iBACF,IACE,MAAMrB,QAAiBC,EAAMqB,KAAK,sBAAuB,CACvDC,QAAS/B,SAASC,eAAe,WAAW+B,MAC5CC,QAASjC,SAASC,eAAe,WAAW+B,MAC5CE,eAAgBC,SAASnC,SAASC,eAAe,YAAY+B,SAE/DI,MAAM,0BAA4B5B,EAASK,KAAKM,cAChDb,GACF,OAASqB,GACPS,MAAM,oBAAqB,OAAAC,EAAA,OAAAC,EAAAX,EAAMnB,mBAAUK,WAAhB,EAAAwB,EAAsBE,SAAU,iBAC7D,CACF,CAEAhC,eAAeF,YACb,MAAMmC,EAAWxC,SAASC,eAAe,aAAa+B,MACtD,UACQvB,EAAMqB,KAAK,gBAAgBU,WACjCJ,MAAM,mBACN9B,GACF,OAASqB,GACPS,MAAM,qBAAsB,OAAAC,EAAA,OAAAC,EAAAX,EAAMnB,mBAAUK,WAAhB,EAAAwB,EAAsBE,SAAU,iBAC9D,CACF,CAEAhC,eAAekC,EAAYhB,WACzB,UACQhB,EAAMqB,KAAK,gBAAgBL,WACjCW,MAAM,mBACN9B,GACF,OAASqB,GACPS,MAAM,qBAAsB,OAAAC,EAAA,OAAAC,EAAAX,EAAMnB,mBAAUK,WAAhB,EAAAwB,EAAsBE,SAAU,iBAC9D,CACF"}