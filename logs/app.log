2026-02-06T00:18:44.150253363Z INFO:     Waiting for application startup.
2026-02-06T00:18:44.150549109Z 2026-02-06 00:18:44,150 - INFO - ðŸš€ Starting Namaskah SMS API...
2026-02-06T00:18:44.15056444Z 2026-02-06 00:18:44,150 - INFO - Initializing database...
2026-02-06T00:18:44.474976024Z 2026-02-06 00:18:44,474 - INFO - Database tables created successfully
2026-02-06T00:18:44.475015206Z 2026-02-06 00:18:44,474 - INFO - Checking admin user...
2026-02-06T00:18:44.475068639Z 2026-02-06 00:18:44,474 - INFO - Running startup initialization...
2026-02-06T00:18:44.484834231Z 2026-02-06 00:18:44,484 - WARNING - (trapped) error reading bcrypt version
2026-02-06T00:18:44.484846581Z Traceback (most recent call last):
2026-02-06T00:18:44.484851651Z   File "/home/appuser/.local/lib/python3.11/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
2026-02-06T00:18:44.484865002Z     version = _bcrypt.__about__.__version__
2026-02-06T00:18:44.484870082Z               ^^^^^^^^^^^^^^^^^
2026-02-06T00:18:44.484874563Z AttributeError: module 'bcrypt' has no attribute '__about__'
2026-02-06T00:18:46.155278583Z 2026-02-06 00:18:46,155 - ERROR - Failed to init admin user: (psycopg2.errors.NotNullViolation) null value in column "is_affiliate" of relation "users" violates not-null constraint
2026-02-06T00:18:46.155302764Z DETAIL:  Failing row contains (admin@namaskah.app, $2b$12$2Jz8ltW5pWYNelt5PjFuye5GVKGClJIbx2b0R0B1SWnifAbfpWg0W, 1000, 1, t, f, t, null, null, null, freemium, null, null, 0, 0, null, null, null, 0, null, email, null, null, null, null, 0, null, en, USD, null, null, null, null, t, null, null, null, null, null, null, null, null, null, null, 2026-02-06 00:18:44.478129, null).
2026-02-06T00:18:46.155309945Z 
2026-02-06T00:18:46.155327735Z [SQL: 
2026-02-06T00:18:46.155331846Z                     INSERT INTO users (
2026-02-06T00:18:46.155335636Z                         email, password_hash, is_admin, is_moderator, is_active, credits, 
2026-02-06T00:18:46.155339176Z                         free_verifications, email_verified, subscription_tier, 
2026-02-06T00:18:46.155341956Z                         bonus_sms_balance, monthly_quota_used, referral_earnings, 
2026-02-06T00:18:46.155345086Z                         provider, failed_login_attempts, language, currency, created_at
2026-02-06T00:18:46.155348367Z                     )
2026-02-06T00:18:46.155351277Z                     VALUES (
2026-02-06T00:18:46.155353847Z                         %(email)s, %(hash)s, true, false, true, 1000, 
2026-02-06T00:18:46.155356767Z                         1.0, true, 'freemium', 
2026-02-06T00:18:46.155359097Z                         0.0, 0.0, 0.0, 
2026-02-06T00:18:46.155362057Z                         'email', 0, 'en', 'USD', NOW()
2026-02-06T00:18:46.155364308Z                     )
2026-02-06T00:18:46.155366637Z                 ]
2026-02-06T00:18:46.155369538Z [parameters: {'email': 'admin@namaskah.app', 'hash': '$2b$12$2Jz8ltW5pWYNelt5PjFuye5GVKGClJIbx2b0R0B1SWnifAbfpWg0W'}]
2026-02-06T00:18:46.155371918Z (Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-02-06T00:18:46.155374188Z 2026-02-06 00:18:46,155 - INFO - Startup initialization completed
2026-02-06T00:18:46.155389019Z 2026-02-06 00:18:46,155 - INFO - Admin user verified
2026-02-06T00:18:46.155395199Z 2026-02-06 00:18:46,155 - INFO - âœ… Application startup completed successfully
2026-02-06T00:18:46.155721807Z INFO:     Application startup complete.
2026-02-06T00:18:46.237048708Z INFO:     Uvicorn running on http://0.0.0.0:10000 (Press CTRL+C to quit)
2026-02-06T00:18:47.185548067Z INFO:     127.0.0.1:42402 - "HEAD / HTTP/1.1" 405 Method Not Allowed
2026-02-06T00:18:52.870332712Z ==> Your service is live ðŸŽ‰
2026-02-06T00:18:53.014669731Z ==> 
2026-02-06T00:18:53.018308394Z ==> ///////////////////////////////////////////////////////////
2026-02-06T00:18:53.02211948Z ==> 
2026-02-06T00:18:53.024849714Z ==> Available at your primary URL https://namaskah.onrender.com
2026-02-06T00:18:53.027677281Z ==> 
2026-02-06T00:18:53.030198861Z ==> ///////////////////////////////////////////////////////////
2026-02-06T00:18:53.139825715Z INFO:     10.20.143.131:0 - "GET / HTTP/1.1" 200 OK
2026-02-06T00:20:18.803660693Z INFO:     10.22.125.131:0 - "GET / HTTP/1.1" 200 OK
2026-02-06T00:20:28.543867579Z INFO:     10.20.212.66:0 - "GET /auth/login HTTP/1.1" 301 Moved Permanently
2026-02-06T00:20:28.919721916Z INFO:     10.20.143.131:0 - "GET /login HTTP/1.1" 200 OK
2026-02-06T00:20:32.217082116Z 2026-02-06 00:20:32,216 - WARNING - Login attempt with non-existent email: admin@namaskah.app
2026-02-06T00:20:32.222680537Z INFO:     10.20.143.131:0 - "POST /api/auth/login HTTP/1.1" 401 Unauthorized2026-02-07 04:55:56,920 - startup - INFO - ðŸš€ Starting Namaskah SMS API...
2026-02-07 04:55:56,921 - startup - INFO - Initializing database...
2026-02-07 04:55:57,567 - startup - ERROR - Startup failed: (psycopg2.errors.DatatypeMismatch) foreign key constraint "affiliate_commissions_affiliate_id_fkey" cannot be implemented
DETAIL:  Key columns "affiliate_id" and "id" are of incompatible types: character varying and uuid.

[SQL: 
CREATE TABLE affiliate_commissions (
	affiliate_id VARCHAR NOT NULL, 
	transaction_id VARCHAR(255) NOT NULL, 
	amount FLOAT NOT NULL, 
	commission_rate FLOAT NOT NULL, 
	status VARCHAR(50), 
	payout_date TIMESTAMP WITHOUT TIME ZONE, 
	id VARCHAR NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	updated_at TIMESTAMP WITHOUT TIME ZONE, 
	PRIMARY KEY (id), 
	FOREIGN KEY(affiliate_id) REFERENCES users (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
